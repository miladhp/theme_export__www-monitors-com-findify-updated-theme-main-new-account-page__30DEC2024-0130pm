{% liquid
  assign page_url = content_for_header | split: '"pageurl":"' | last | split: '"' | first | split: request.host | last | replace: '\/', '/' | replace: '%20', ' ' | replace: '\u0026', '&'
  assign query_parameters = page_url | split: 'sections=findify-autocomplete&' | last
  assign suggestions = query_parameters | split: 'suggestion=' | last | split: '&' | first | split: ','
  assign query = query_parameters | split: 'query=' | last | split: '&' | first
  assign results_count = query_parameters | split: 'results_count=' | last | split: '&' | first
  assign contents_param = page_url | split: 'content=' | last
  assign contents = contents_param | split: '&' | first | split: ';'

  assign settingsObj = query_parameters | split: 'settings=' | last | split: '|' | first
  assign desktop_suggestion_template = settingsObj | split: 'desktop_suggestion_template:' | last | split: '|' | first | split: '%7C' | first
  assign mobile_products_per_row = settingsObj | split: 'mobile_products_per_row:' | last | split: '|' | first | split: '%7C' | first
  assign mobile_suggestion_template = settingsObj | split: 'mobile_suggestion_template:' | last | split: '|' | first | split: '%7C' | first
  assign desktop_products_per_row = settingsObj | split: 'desktop_products_per_row:' | last | split: '|' | first | split: '%7C' | first

  assign suggestionsTemplate = 'vertical'
  assign class = 'findify-autocomplete findify-autocomplete-fullscreen'

  assign basepath = shop_locale.root_url | append: 'search'
%}
