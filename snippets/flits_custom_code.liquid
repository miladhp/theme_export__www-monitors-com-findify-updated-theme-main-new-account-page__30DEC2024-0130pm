
{% comment %} PLEASE DON'T MAKE CHANGES IN THIS FILE IT'S AFFECT THE CODE IF YOU NEED ANY HELP PLEASE CONTACT TO FLITS TEAM support@getflits.com {% endcomment %}

{% liquid
	capture profile_firstNameText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.first_name',default_template:'First Name'
	endcapture
	capture profile_lastNameText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.last_name',default_template:'Last Name'
	endcapture
	capture profile_emailText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.email',default_template:'Email'
	endcapture
	capture profile_contactNoText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.contact_number',default_template:'Contact Number'
	endcapture
	capture profile_birthdateText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.birthdate',default_template:'Birthdate'
	endcapture
	capture profile_genderText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.gender',default_template:'Gender'
	endcapture
	capture profile_maleText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.male',default_template:'Male'
	endcapture
	capture profile_femaleText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.female',default_template:'Female'
	endcapture
	capture profile_otherText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.other',default_template:'Other'
	endcapture
	capture profile_buttonEditText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.edit_button',default_template:'Edit'
	endcapture
	capture profile_buttonCancelText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.cancel_button',default_template:'Cancel'
	endcapture
	capture profile_buttonSaveText
		render 'flits_capture_code' with 'translation',template:'flits.profile_page.save_button',default_template:'Save'
	endcapture

	capture address_addANewAddressText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.add_new_address',default_template:'Add New Address'
	endcapture
	capture address_firstNameText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.first_name',default_template:'First Name'
	endcapture
	capture address_lastNameText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.last_name',default_template:'Last Name'
	endcapture
	capture address_address1Text
		render 'flits_capture_code' with 'translation',template:'flits.address_page.address1',default_template:'Address Line 1'
	endcapture
	capture address_address2Text
		render 'flits_capture_code' with 'translation',template:'flits.address_page.address2',default_template:'Address Line 2'
	endcapture
	capture address_companyText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.company',default_template:'Company'
	endcapture
	capture address_zipText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.zip',default_template:'Postal/Zip Code'
	endcapture
	capture address_phoneText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.contact_number',default_template:'Contact Number'
	endcapture
	capture address_cityText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.city',default_template:'City'
	endcapture
	capture address_countryText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.country',default_template:'Country'
	endcapture
	capture address_provinceText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.province',default_template:'Province'
	endcapture
	capture address_setAsDefaultAddressText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.mark_as_default_checkbox',default_template:'Mark as Default Address'
	endcapture
	capture address_cancelAddressText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.cancel_button',default_template:'Cancel'
	endcapture
	capture address_saveAddressText
		render 'flits_capture_code' with 'translation',template:'flits.address_page.save_button',default_template:'Save'
	endcapture

	capture credit_headerLineText
		render 'flits_capture_code' with 'translation',template:'flits.credit_page.header_line_html',default_template:"Save Money <strong>Through Rewards</strong>"
	endcapture
	capture credit_howToEarnText
		render 'flits_capture_code' with 'translation',template:'flits.credit_page.how_to_earn',default_template:"How to Earn?"
	endcapture
	capture credit_howToSpentText
		render 'flits_capture_code' with 'translation',template:'flits.credit_page.how_to_spend',default_template:"How to Spend?"
	endcapture
	capture credit_noHistoryYetText
		render 'flits_capture_code' with 'translation',template:'flits.credit_page.blank_screen_line_1_html',default_template:"You are missing out on taking advantage of<br>our Reward Program."
	endcapture
	capture credit_marketingLineText
		render 'flits_capture_code' with 'translation',template:'flits.credit_page.blank_screen_line_2_html',default_template:"So why wait? Start shopping our products to start earning rewards."
	endcapture

	capture earnCredit_headerLineText
		render 'flits_capture_code' with 'translation',template:'flits.how_to_earn_credit_page.header_line_html',default_template:'Earn More <strong>Spend More</strong>'
	endcapture
	capture earnCredit_noRulesFound
		render 'flits_capture_code' with 'translation',template:'flits.how_to_earn_credit_page.no_rule_found',default_template:'The store has not set up any rules yet'
	endcapture

	capture spendCredit_headerLineText
		render 'flits_capture_code' with 'translation',template:'flits.how_to_spend_credit_page.header_line_html',default_template:'Spend More <strong>Save More</strong>'
	endcapture
	capture spendCredit_noRulesFound
		render 'flits_capture_code' with 'translation',template:'flits.how_to_spend_credit_page.no_rule_found',default_template:'The store has not set up any rules yet'
	endcapture

	capture fromAdminPage_headerLineText
		render 'flits_capture_code' with 'translation',template:'flits.from_admin_page.header_line_html',default_template:'From Store Owner'
	endcapture

	capture refer_noHistoryYetText
		render 'flits_capture_code' with 'translation',template:'flits.refer_friend_page.blank_screen_line_1_html',default_template:"You have no referrals so far.<br>You can earn rewards by referring our store to your friends.<br>Copy the above link and share it with your friends or"
	endcapture
	capture refer_marketingLineText
		render 'flits_capture_code' with 'translation',template:'flits.refer_friend_page.blank_screen_line_2_html',default_template:"Share the link directly via WhatsApp and Facebook."
	endcapture
	capture refer_youAreReferredByText
		render 'flits_capture_code' with 'translation',template:'flits.refer_friend_page.you_are_referred_by',default_template:'Referred by'
	endcapture
	
	capture order_orderDateFormatText
		render 'flits_capture_code' with 'translation',template: 'flits.order_page.order_date_format' ,default_template:'%B %d, %Y'
	endcapture
	capture order_noOrdersViewText
		render 'flits_capture_code' with 'translation',template:'flits.order_page.blank_screen_line_1_html',default_template:"You haven't placed any orders yet.<br>We can't wait to have you as a customer."
	endcapture
	capture order_marketingLineText
		render 'flits_capture_code' with 'translation',template:'flits.order_page.blank_screen_line_2_html',default_template:"Take a look at our products here"
	endcapture
	
	capture topOrder_noProductsViewText
		render 'flits_capture_code' with 'translation',template:'flits.top_ordered_products_page.blank_screen_line_1_html',default_template:"There are no top ordered products to display.<br>We are pretty sure that a few products<br>from our fantastic collection <br>will make it to your top products."
	endcapture
	capture topOrder_searchPlaceholderText
		render 'flits_capture_code' with 'translation',template:'flits.top_ordered_products_page.search_placeholder',default_template:'Search product here'
	endcapture

	capture wishlist_noWishlistViewText
		render 'flits_capture_code' with 'translation',template:'flits.wishlisted_product_page.blank_screen_line_1_html',default_template:"Your wish is our command but<br>you haven’t wishlisted any products."
	endcapture
	capture wishlist_marketingLineText
		render 'flits_capture_code' with 'translation',template:'flits.wishlisted_product_page.blank_screen_line_2_html',default_template:"You can wishlist products<br>and buy them later"
	endcapture

	capture recentlyViewed_noProductsViewText
		render 'flits_capture_code' with 'translation',template:'flits.recently_viewed_product_page.blank_screen_line_1_html',default_template:"Looks like you haven’t checked out<br>any of our products recently.<br>We have a vast collection of quality products."
	endcapture
	capture recentlyViewed_marketingLineText
		render 'flits_capture_code' with 'translation',template:'flits.recently_viewed_product_page.blank_screen_line_2_html',default_template:"So why wait? Check out our products."
	endcapture

	capture updatePassword_newPasswordText
		render 'flits_capture_code' with 'translation',template:'flits.update_password_page.new_password',default_template:'New Password'
	endcapture
	capture updatePassword_newPasswordPlaceholderText
		render 'flits_capture_code' with 'translation',template:'flits.update_password_page.new_password_placeholder',default_template:'Enter New Password'
	endcapture
	capture updatePassword_confirmNewPasswordText
		render 'flits_capture_code' with 'translation',template:'flits.update_password_page.confirm_new_password',default_template:'Confirm New Password'
	endcapture
	capture updatePassword_confirmPasswordPlaceholderText
		render 'flits_capture_code' with 'translation',template:'flits.update_password_page.confirm_password_placeholder',default_template:'Confirm New Password'
	endcapture
	capture updatePassword_passwordHintMessageText
		render 'flits_capture_code' with 'translation',template:'flits.update_password_page.password_hint_message',default_template:'Password must be between 6 to 40 characters'
	endcapture
%}

{% assign flitsBirthdate =  customer.metafields.Flits.birthdate | split: '-'  %}
{% assign flitsBirthdateDay =  flitsBirthdate[2] | plus:0  %}
{% assign flitsBirthdateMonth =  flitsBirthdate[1] | plus:0  %}
{% assign flitsBirthdateYear =  flitsBirthdate[0] | plus:0  %}

{%- case flits_custom_code -%}

{%- when 'module_order_list' -%}
	{% if customer.orders.size != 0 %}
		{% paginate customer.orders by 3 %}
			{% for order in customer.orders %}
				{% assign order_date_month_original = order.created_at | date: '%B' %}
				{% assign order_date_month_downcase = order.created_at | date: '%B' | downcase %}
				{% assign order_date_month_text = 'flits.months.' | append:order_date_month_downcase  %}
				{% liquid
					capture order_date_month_text
						render 'flits_capture_code' with 'translation',template: order_date_month_text ,default_template: order_date_month_downcase 
					endcapture
				%}
				{% assign order_date = order.created_at | date:order_orderDateFormatText | replace:order_date_month_original,order_date_month_text | strip %}
				{% assign order_cancelled_month_original = order.cancelled_at | date: '%B' %}
				{% assign order_cancelled_month_downcase = order.cancelled_at | date: '%B' | downcase  %}
				{% assign order_cancelled_month_text = 'flits.months.' | append:order_cancelled_month_downcase  %}
				{% liquid
					capture order_cancelled_month_text
						render 'flits_capture_code' with 'translation',template: order_cancelled_month_text ,default_template: order_cancelled_month_downcase 
					endcapture
				%}
				{% assign order_cancelled_date = order.cancelled_at | date:order_orderDateFormatText | replace:order_cancelled_month_original,order_cancelled_month_text | strip %}
				{% assign payemntType = '' %}
				{% if order.transactions[0].gateway %}
					{% assign payemntType = order.transactions[0].gateway | replace: '_',' ' | capitalize %}
					{% assign payemntType = '(' | append: payemntType | append: ')' %}
				{% endif %}
				{% assign soldCount = 0 %}
				{% assign notExistCount = 0 %}
				{% assign countTotal = 0 %}
				{% assign totalItemQuantity = 0 %}
				{% assign isDisable = 'disabled' %}
				{% for item in order.line_items %}
					{% assign totalItemQuantity = totalItemQuantity | plus: item.quantity %}
					{% if item.variant.available == false %}
						{% assign soldCount = soldCount | plus: 1 %}
					{% endif %}
					{% unless item.variant.id %}
						{% assign notExistCount = notExistCount | plus: 1 %}
					{% endunless %}
				{% endfor %}
				{% assign countTotal = soldCount | plus: notExistCount %}
				<div class="flits-order-card">
					<div class="flits-order-details">
						<div class="flits-order-information">
							<div class="flits-order-information-row">
								<div>
									<span class="flits-order-date">{{ order_date }}</span>
								</div>
                              <div>
									<span class="flits-order-label" data-flits-lang="order_page.order_number" data-flits-lang-default="Order">Order :</span> 
									
									<span class="flits-order-number flits-order-value">{{ order.name | strip }}</span>
								</div>
                              {% if order.metafields.checkoutblocks.order_po_number %}
                                <div>
                                  <span class="flits-order-label" data-flits-lang="order_page.order_number" data-flits-lang-default="Order">Order PO# :</span> 	
                                  <span class="flits-order-number flits-order-value">{{ order.metafields.checkoutblocks.order_po_number }}</span>
                                </div>
                                {% endif %}
								<div>
									<span class="flits-order-label" data-flits-lang="order_page.total_items" data-flits-lang-default="Total Items">Total Items :</span>
									<span class="flits-order-total-items flits-order-value">{{ totalItemQuantity }}</span>
								</div>
								<div>
									<span class="flits-order-label" data-flits-lang="order_page.payment_status" data-flits-lang-default="Payment">Payment :</span>
									<span class="flits-order-total-items flits-order-value">{{ order.financial_status_label | append: payemntType }}</span>
								</div>
								<div class="flits-view-order-button">
									<span data-flits-lang="order_page.show_order_details" data-flits-lang-default="View Order">View Order</span>
									<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.77 25"><path id="Layer_2" data-name="Layer 2" d="M13.4,11.61,2.16.37A1.26,1.26,0,0,0,.37,2.15L10.72,12.5.37,22.85a1.26,1.26,0,0,0,1.79,1.78L13.4,13.39A1.26,1.26,0,0,0,13.4,11.61Z" transform="translate(0 0)"/></svg>
								</div>
							</div>
							<div class="flits-order-information-row">
								<div>
									<span class="flits-order-label" data-flits-lang="order_page.order_number" data-flits-lang-default="Order">Order :</span> 
									
									<span class="flits-order-number flits-order-value">{{ order.name | strip }}</span>
								</div>
                              {% if order.metafields.checkoutblocks.order_po_number %}
                                <div>
                                  <span class="flits-order-label" data-flits-lang="order_page.order_number" data-flits-lang-default="Order">Order PO# :</span> 	
                                  <span class="flits-order-number flits-order-value">{{ order.metafields.checkoutblocks.order_po_number }}</span>
                                </div>
                                {% endif %}
								<div>
									<span class="flits-order-label" data-flits-lang="order_page.total_items" data-flits-lang-default="Total Items">Total Items :</span>
									<span class="flits-order-total-items flits-order-value">{{ totalItemQuantity }}</span>
								</div>
								<div>
									<span class="flits-order-label" data-flits-lang="order_page.payment_status" data-flits-lang-default="Payment">Payment :</span>
									<span class="flits-order-total-items flits-order-value">{{ order.financial_status_label | append: payemntType | capitalize }}</span>
								</div>
							</div>
						</div>
						<div class="flits-order-actions">
							<div class="flits-order-button-grp">

                                {% comment %}Invoicr button added{% endcomment %} 
                                  {% assign hash = "13111853145" | append: order.id | append: "2816"| append: order.id | md5 | append: "_2816_" | append: order.id %}
                                  <a class="flits-button flits-secondary-btn flits-mx-15 flits-my-10" target="_blank" href="https://bayland.myshopify.com/apps/doc/invoice/{{ hash }}/invoice_{{ order.name | replace: "#", "" }}.pdf">Download Invoice</a>

								{% if shop.metafields.Flits.IS_ORDER_CONTACT_US_ENABLE and shop.metafields.Flits.IS_ORDER_CONTACT_US_ENABLE == 1 %}
									{% assign order_number = 'data-flits-order-number="' | append: order.order_number | append : '"'  %}
									{% assign order_name = 'data-flits-order-name="' | append: order.name | append : '"'  %}
									{% assign order_date =  order.created_at | date: "%d %B %Y, %I:%M %p"  %}
									{% assign order_date = 'data-flits-order-date="' | append: order_date | append : '"'  %}
									{% assign order_fulfillment_status = 'data-flits-order-fulfillment-status="' | append: order.fulfillment_status_label | append : '"'  %}
									{% assign order_payment_status = 'data-flits-order-payment-status="' | append: order.financial_status_label | append : '"'  %}
									{% assign order_link = 'data-flits-order-link="https://' | append: shop.domain | append: '/admin/orders/' | append: order.id | append : '"' %}
									{% assign customer_link = 'data-flits-customer-link="https://' | append: shop.domain | append: '/admin/customers/' | append: customer.id | append : '"' %}
									{% assign data_attribute = order_number  
									| append: " " | append: order_name  
									| append: " " | append: order_date
									| append: " " | append: order_fulfillment_status
									| append: " " | append: order_payment_status 
									| append: " " | append: order_link 
									| append: " " | append: customer_link 
									| append: " " | append: 'data-flits-lang="order_contact_us.contact_us_button" data-flits-lang-default="Contact Us"' 
									%}
									{% render 'flits_capture_code' with 'component',template:'comp_button', text:'Contact Us', class:'flits-secondary-btn flits-mx-15 flits-my-10 flits-contact-us-btn', attr:data_attribute %}
								{% endif %}
								{% if shop.metafields.Flits.IS_REORDER_ENABLE and shop.metafields.Flits.IS_REORDER_ENABLE == 1 %}
									{% if order.line_items.size !=  countTotal  %}
										{% assign isDisable = '' %}
									{% endif %}
									{% assign dataAttr = order.id | prepend: 'data-flits-lang="order_page.reorder" data-flits-lang-default="Re-order" data-flits-target=' | append: " " | append: isDisable  %}
									{% render 'flits_capture_code' with 'component',template:'comp_button', text:'Re-order', class:'flits-primary-btn flits-mx-15 flits-my-10 flits-reorder-btn', attr:dataAttr %}
								{% endif %}
							</div>
						</div>
					</div>
					<div class="flits-collaps-order-details">
						{% assign order_line_item_price = 0 %}
						<script>
							window.flitsOrder[{{order.id}}] = [];
						</script>
						{% for item in order.line_items %}
						  {% assign isProductAvailable = 'true' %}
	                      {% if item.variant.available == false or item.product.published_at == blank %}
	                      	{% assign isProductAvailable = 'false' %}
	                      {% endif %}
							<script>
								window.flitsOrder[{{order.id}}].push({
									variant_id:'{{ item.variant_id }}',
									quantity:'{{ item.quantity }}',
									available: '{{ isProductAvailable }}',
									inventory_quantity: '{{ item.variant.inventory_quantity }}',
									item_title: '{{ item.title }}',
									item_variant_id: '{{ item.variant.id }}',
									cart: '{{ cart.item[0].quantity }}',
									cartV: '{{ cart.item[0].variant_id }}'
								});
							</script>
						{% endfor %}
						<div class="flits-line-items flits-line-items-slick">
							{% for item in order.line_items %}
								<div class="flits-order-item" data-flits-variant-id="{{ item.variant.id }}" data-variant-available="{{ item.variant.available }}">
									<div class="flits-product-image-thumbnail">
										<img src="{{item.image | img_url: 'small'}}" alt="{{ item.title }}">
										<span class="flits-product-quantity-badge flits-badge">{{ item.quantity }}</span>
										{% unless item.variant.id %}
											<span class="flits-product-not-exist" data-flits-lang="order_page.product_unavailable" data-flits-lang-default="Unavailable">Unavailable</span>
										{% endunless %}
										{% if item.variant.available == false %}
											<div class="flits-ribbion-overlay">
												<span class="flits-bottom-full flits-ribbion flits-red" data-flits-lang="order_page.sold_out" data-flits-lang-default="Sold Out">Sold Out</span>
											</div>
										{% endif %}
										{% unless item.product.published_at %}
	                                      <div class="flits-ribbion-overlay">
	                                        <span class="flits-bottom-full flits-ribbion flits-red" data-flits-lang="order_page.product_unavailable" data-flits-lang-default="Unavailable">Unavailable</span>
	                                      </div>
                                      {% endunless %}
									</div>
									{% if item.url and item.product.published_at %}
										<a href="{{ item.url }}" data-tippy-content="{{ item.title | strip }}">
											<p class="flits-product-name flits-link flits-text-ellipsis" data-tippy-content="{{ item.title | strip }}">{{ item.title | strip }}</p>
										</a>
									{% else %}
										<p class="flits-product-name flits-link flits-text-ellipsis" data-tippy-content="{{ item.title | strip }}">{{ item.title | strip }}</p>
									{% endif %}
									<p class="flits-product-price">{{ item.price | money }}</p>
								</div>
								{% assign order_line_item_price = order_line_item_price | plus: item.line_price %}
							{% endfor %}
						</div>
						<div class="flits-order-price-breakdown">
                           <div class="flits-price-row">
								<div>
									<p data-flits-lang="order_page.subtotal" data-flits-lang-default="Sub Total">Sub Total</p>
								</div>
								<p class="flits-strong">{{ order_line_item_price | money }}</p>
							</div>
							{% for discount in order.discounts %}
								<div class="flits-price-row">
									<div>
										<p data-flits-lang="order_page.discount_code" data-flits-lang-default="Discount">Discount</p>
										<small class="flits-discount-code">{{ discount.code }}</small>
									</div>
									<p class="flits-strong">{{ discount.savings | money }}</p>
								</div>
							{% endfor %}
							<div class="flits-price-row">
								<div>
									<p data-flits-lang="order_page.shipping_and_handling" data-flits-lang-default="Shipping Cost">Shipping Cost</p>
								</div>
								<p class="flits-strong">{{ order.shipping_price | money }}</p>
							</div>
							{% for tax_line in order.tax_lines %}
								<div class="flits-price-row">
									<div>
										<p>{{ tax_line.title }} {{ tax_line.rate | times: 100 }}%</p>
									</div>
									<p class="flits-strong">{{ tax_line.price | money }}</p>
								</div>
							{% endfor %}
						</div>
					</div>
					<div class="flits-grand-total">
						<div>
							<p data-flits-lang="order_page.grand_total" data-flits-lang-default="Grand Total">Grand Total</p>
						</div>
						<p class="flits-strong">{{ order.total_price | money }}</p>
					</div>
					<div class="flits-order-address">
						<div class="flits-order-address-row">
							<div class="flits-address-view-button">
								<span data-flits-lang="order_page.address" data-flits-lang-default="Address">
								Address
								</span>
								<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.77 25"><path id="Layer_2" data-name="Layer 2" d="M13.4,11.61,2.16.37A1.26,1.26,0,0,0,.37,2.15L10.72,12.5.37,22.85a1.26,1.26,0,0,0,1.79,1.78L13.4,13.39A1.26,1.26,0,0,0,13.4,11.61Z" transform="translate(0 0)"/></svg>
							</div>
							<div>
								{% if order.cancelled %}
									<span class="flits-order-label" data-flits-lang="order_page.cancel_at" data-flits-lang-default="Cancelled at" data-value='{{ order.cancelled_at }}'>Cancelled at :</span>
									<span class='flits-order-value'>{{ order_cancelled_date }}</span>
								{% else %}                    
									<span class="flits-order-label" data-flits-lang="order_page.fulfillment_status" data-flits-lang-default="Fulfillment Status">Fulfillment Status :</span>
									<span class="flits-order-total-items flits-order-value">{{ order.fulfillment_status_label }}</span>
								{% endif %}
							</div>
						</div>
					</div>
					<div class="flits-address-breakdown">
						<div class="flits-address-row">
							<p class="flits-strong flits-mr-5" data-flits-lang="order_page.shipping_address" data-flits-lang-default="Shipping Address">Shipping Address : </p>
							{{ order.shipping_address | format_address | replace: '<br>', '&nbsp' }}
						</div>
						<div class="flits-address-row">
							<p class="flits-strong flits-mr-5" data-flits-lang="order_page.billing_address" data-flits-lang-default="Billing Address">Billing Address : </p>
							{{ order.billing_address | format_address | replace: '<br>', '&nbsp' }}
						</div>
					</div>
				</div>
			{% endfor %}
		{% endpaginate %}
	{% endif %}

{% endcase %}